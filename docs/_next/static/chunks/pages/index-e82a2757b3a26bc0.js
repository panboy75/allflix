(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(t,e,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(6887)}])},7958:(t,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>i});var n=l(4848),a=l(6540),r=l(8635);let i=t=>{let{title:e,mp3_url:l,onPlayEndedEvent:i}=t,o=(0,a.useRef)(null),[s,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(0),[m,g]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(g(0),u(0),d(!1),o.current){if(""==l){o.current.pause(),d(!1);return}o.current.addEventListener("loadedmetadata",()=>{var t,e;g((null===(t=o.current)||void 0===t?void 0:t.duration)||0),console.log("loadedmetadata"),null===(e=o.current)||void 0===e||e.play(),d(!0)}),o.current.addEventListener("timeupdate",()=>{var t,e;u(null!==(e=null===(t=o.current)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:0)}),o.current.addEventListener("ended",()=>{d(!1),u(0),console.log("ended"),null==i||i(l)})}return()=>{o.current&&(o.current.removeEventListener("loadedmetadata",()=>{}),o.current.removeEventListener("timeupdate",()=>{}),o.current.removeEventListener("ended",()=>{}))}},[l]);let p=t=>{let e=Math.floor(t/3600).toString().padStart(2,"0"),l=Math.floor(t/60).toString().padStart(2,"0"),n=Math.floor(t%60).toString().padStart(2,"0");return 1<=t/3600?"".concat(e,":").concat(l,":").concat(n):"".concat(l,":").concat(n)};return(0,n.jsxs)("div",{className:"player",style:{width:"99%"},children:[(0,n.jsx)("audio",{ref:o,src:l,autoPlay:!1}),(0,n.jsx)(r.default,{text:e,width:"100%"}),(0,n.jsxs)("div",{children:[p(c)," / ",p(m)]}),(0,n.jsxs)("div",{style:{width:"100%"},children:[(0,n.jsx)("button",{onClick:()=>{o.current&&(s?o.current.pause():o.current.play(),d(!s))},className:"button2",children:s?"Pause":"Play"}),(0,n.jsx)("input",{type:"range",min:"0",max:m,value:c,onChange:t=>{let e=parseFloat(t.target.value);u(e),o.current&&(o.current.currentTime=e)},style:{width:"70%",marginLeft:"5px",verticalAlign:"middle"}})]})]})}},5749:(t,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>s});var n=l(4848),a=l(9965),r=l.n(a),i=l(6540),o=l(2448);let s=t=>{let{items:e,command:l,OnPlayClicked:a,OnPlaySerialClicked:s}=t,[d,c]=(0,i.useState)([]),[u,m]=(0,i.useState)(""),[g,p]=(0,i.useState)(null),x="",f=0;null==e||e.map(t=>x=t.rss),null==e||e.map(t=>f=t.count?t.count:0);let v=x;(0,i.useEffect)(()=>{(async()=>{try{var t,e,l,n,a,r,i;let s;let d=await fetch(v);if(!d.ok)throw Error("HTTP error! status: ".concat(d.status));let u=await d.text(),g=new DOMParser().parseFromString(u,"application/xml"),p=g.getElementsByTagName("image"),x=(null===(e=p[0])||void 0===e?void 0:null===(t=e.getElementsByTagName("url")[0])||void 0===t?void 0:t.textContent)||"";m(x),console.log("image_url = ",x);let h=g.getElementsByTagName("item"),b=[];s=0===f?h.length:h.length<=f?h.length:f,console.log("nCount = ",s);for(let t=0;t<s;t++){let e=(null===(l=h[t].getElementsByTagName("title")[0])||void 0===l?void 0:l.textContent)||"",s=(null===(n=h[t].getElementsByTagName("link")[0])||void 0===n?void 0:n.textContent)||"",d=(null===(a=h[t].getElementsByTagName("pubDate")[0])||void 0===a?void 0:a.textContent)||"",c=new Date(d),u=(0,o.getDateString)(c),m=(null===(r=h[t].getElementsByTagName("itunes:duration")[0])||void 0===r?void 0:r.textContent)||"",g=0;if(m.includes(":")){let t=Number(m.substring(0,2)),e=Number(m.substring(3,5)),l=Number(m.substring(6,8));g=3600*t+60*e+l}else g=Number(m);let p=(null===(i=h[t].getElementsByTagName("enclosure")[0])||void 0===i?void 0:i.getAttribute("url"))||"";b.push({title:e,link:s,pubDate:u,duration:g,mp3:p})}c(b)}catch(t){console.error("Error fetching RSS feed:",t)}})()},[]),(0,i.useEffect)(()=>{if(l&&console.log("[podcast01.tsx] command = ",l),(null==l?void 0:l.action)=="next"){console.log("[podcast01.tsx] command action = next, mp3_url = ",l.mp3_url);let t=S();t&&b(t)}},[l]);let h=t=>{console.log("[podcast01.tsx] onPlayClicked, mp3_url = ",t.mp3);let e={title:t.title,mp3_url:(null==t?void 0:t.mp3)||"",image_url:u,duration:t.duration||0};null==a||a(e)},b=t=>{console.log("[podcast01.tsx] onPlayClicked, mp3_url = ",t.mp3);let e={title:t.title,mp3_url:(null==t?void 0:t.mp3)||"",image_url:u,duration:t.duration||0};null==s||s(e),p(t)},y=(t,e)=>{if(!e)return"text-center text-xl font-bold bg-blue-100";let l=new Date(e.pubDate),n=new Date(t.pubDate);return n.getTime()===l.getTime()?"text-center text-xl font-bold text-blue-900 bg-blue-400":n.getTime()<l.getTime()?"text-center text-xl font-bold text-gray-400 text-blue-900 bg-blue-100":"text-center text-xl font-bold bg-blue-200"},S=()=>{if(!g||0===d.length)return null;let t=d.findIndex(t=>t.title===g.title);return t<0||d.length-1<t?null:0<=t-1?d[t-1]:null};return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"w-full text-2xl font-bold flex items-center bg-black text-gray-100",children:[(0,n.jsx)("img",{src:u,style:{verticalAlign:"middle",height:"100px"},alt:"logo"}),"\xa0책플릭스 몰아보기!!"]}),null==d?void 0:d.map((t,e)=>(0,n.jsx)("table",{className:"w-full border border-gray-300 mb-1",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{rowSpan:2,width:60,className:y(t,g),children:t.title.trim().substring(0,t.title.indexOf(".")-1)}),(0,n.jsx)("td",{className:"p-1 bg-gray-100",children:(0,n.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-xl font-bold",children:t.title.substring(t.title.indexOf(".")+1).trim()})})]}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:2,className:"text-gray-600 p-1 bg-gray-100",children:(0,n.jsxs)("div",{className:"flex",children:[t.pubDate," | ",(0,o.getTimeString)(t.duration?t.duration:0),"\xa0 ",(0,n.jsx)(r(),{onClick:()=>h(t),src:"".concat("/allflix","/images/play.svg"),width:30,style:{verticalAlign:"middle",cursor:"pointer"},alt:"듣기",height:50}),(0,n.jsx)("button",{onClick:()=>b(t),className:"ml-2 text-black hover:text-blue-800 bg-blue-300 p-1 rounded",children:"이어듣기"})]})})})]})},e))]})}},8635:(t,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>r});var n=l(4848),a=l(6540);let r=t=>{let{text:e,width:l="100%",duration:r=10}=t,[i,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{o(40<e.length)},[e]),(0,n.jsxs)("div",{style:{width:l,overflow:"hidden",whiteSpace:"nowrap",border:"0px solid #ccc",position:"relative"},children:[(0,n.jsx)("span",{style:{display:"inline-block",minWidth:"100%",fontSize:"1.2em",fontWeight:"bold",paddingLeft:i?"100%":0,animation:i?"scroll-text ".concat(r,"s linear infinite"):"none"},children:e}),(0,n.jsx)("style",{children:"\n          @keyframes scroll-text {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-100%); }\n          }\n        "})]})}},6887:(t,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>s});var n=l(4848),a=l(5749),r=l(7958),i=l(6540),o=l(2448);function s(){let[t,e]=(0,i.useState)(null),[l,s]=(0,i.useState)(o.EPlaymode.pmNotPlaying),[d,c]=(0,i.useState)(null);return(0,n.jsxs)("div",{className:"containerbox",children:[(0,n.jsx)("div",{className:"top-div",children:(0,n.jsx)(a.default,{items:[{channel_title:"책플릭스",rss:"https://www.omnycontent.com/d/playlist/53ac8cb6-b299-4f93-8280-af50012ddab0/bf128627-0214-462d-9cec-af5500694ca8/9ee52f0c-fbcc-4bb3-95a3-af5500694cb6/podcast.rss"}],OnPlayClicked:t=>{console.log("[app.tsx] onPlayClicked: ",t),s(o.EPlaymode.pmPlayOne),e(t)},OnPlaySerialClicked:t=>{s(o.EPlaymode.pmPlaySerial),e(t)},command:d})}),(0,n.jsx)("div",{className:"bottom-div",children:(0,n.jsx)(r.default,{title:(null==t?void 0:t.title)||"",mp3_url:(null==t?void 0:t.mp3_url)||"",onPlayEndedEvent:t=>{console.log("[app.tsx] onPlayEndedEvent: ",t),o.EPlaymode.pmPlaySerial===l&&(console.log("[app.tsx] onPlayEndedEvent 2: ",t),c({action:"next",mp3_url:t}))}})})]})}},2448:(t,e,l)=>{"use strict";l.r(e),l.d(e,{EPlaymode:()=>n,default:()=>i,getDateString:()=>a,getTimeString:()=>r});var n=function(t){return t[t.pmNotPlaying=0]="pmNotPlaying",t[t.pmPlayOne=1]="pmPlayOne",t[t.pmPlayList=2]="pmPlayList",t[t.pmPlaySerial=3]="pmPlaySerial",t}({});let a=t=>{let e=t.getFullYear(),l=t.getMonth()+1,n=t.getDate(),a=t.getHours(),r=t.getMinutes(),i=t.getDay();return"".concat(e,".").concat(l.toString().padStart(2,"0"),".").concat(n.toString().padStart(2,"0"),"(").concat(["일","월","화","수","목","금","토"][i],") ").concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))},r=t=>{let e=Math.floor(t/3600),l=Math.floor(t%3600/60),n=t%60;return 1<=e?"".concat(e.toString().padStart(2,"0"),":").concat(l.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")):"".concat(l.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))};function i(){return null}}},t=>{var e=e=>t(t.s=e);t.O(0,[965,636,593,792],()=>e(2022)),_N_E=t.O()}]);